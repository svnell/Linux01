# Linux 01

## Part 1. Установка OС

### Установить Ubuntu 20.04 Server LTS без графического интерфейса.

- Графический интерфейс должен отсутсвовать

![Эта строчка означает, что графический интерфейс не установлен](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled.png)

Эта строчка означает, что графический интерфейс не установлен

- Узнайте версию Ubuntu, выполнив команду ***cat /etc/issue***.
    
    ![Версия OS](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%201.png)
    
    Версия OS
    

## Part 2. Создание пользователя

### Создать пользователя, отличного от пользователя, который создавался при установке. Пользователь должен быть добавлен в группу ***adm.***

- Вставьте скриншот вызова команды для создания пользователя

![Создание пользователя mkrtychanr с паролем 1234, добавленный в группу ***adm***](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%202.png)

Создание пользователя mkrtychanr с паролем 1234, добавленный в группу ***adm***

- Новый пользователь должен быть в вызове команды ***cat /etc/passwd***

![Вывод команды](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%203.png)

Вывод команды

## Part 3. Настройка сети ОС

### Задать название машины вида user-1

```bash
sudo hostnamectl set-hostname maelysti-1
```

### Установить временную зону, соответствующую вашему текущему местоположению.

```bash
dpkg-reconfigure tzdata #После ввода этой команды выйдет интерактивное окно
#																			                        смены региона
```

### Вывести называния сетевых интерфейсов с помощью консольной команды

```bash
sudo apt-get install net-tools #установка ifconfig
ifconfig
```

![Вывод команды ifconfig](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%204.png)

Вывод команды ifconfig

- В отчете дать объяснение интерфейса lo
    - lo или же loopback – так называемая обратная петля. Нужна для того, чтоб машина не отправляла пакеты, адресованные самой себе по сети (например, если на ней стоит сервер БД), а просто возвращала обратно себе (сама она из будет обрабатывать, как пакеты, приходящие из вне

### Используя консольную команду получить ip адрес устройства на котором вы работаете, от DHCP сервера

- ip – 10.0.2.15 дефолтный адрес для VM. (данные из вывода команды ifconfig)
- DHCP – Dynamic Host Configuration Protocol. Или же протокол динамической конфигурации хоста. Помогает выдавать клиентам сети адреса внутри сети.

### Определить и вывести на экран внешний IP–адрес и внутренний IP адрес шлюза по умолчанию.

![Внешний IP](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%205.png)

Внешний IP

![Шлюз по умолчанию](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%206.png)

Шлюз по умолчанию

### Задать статичные настройки IP, GW, DNS

1. Для начала убедимся, что до этого все задавалось не статично

![ip add show](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%207.png)

ip add show

1. Для того, чтоб задать статические настройки сети на машине нужно открыть файл конфигурации интерфейсов

![/etc/netplan/00-installer-config.yaml](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%208.png)

/etc/netplan/00-installer-config.yaml

1. Далее нам надо отключить DHCP (стереть его полностью) и задать свои параметры

![Установка статического адреса, маски (24 – 255.255.255.0), шлюза по умолчанию и DNS серверов](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%209.png)

Установка статического адреса, маски (24 – 255.255.255.0), шлюза по умолчанию и DNS серверов

1. Перезапустим network демон

```bash
sudo systemctl restart systemd-networkd
```

1. Теперь проверим наши изменения

![ip add show после перезагрузки демона](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2010.png)

ip add show после перезагрузки демона

### Перезагрузить виртуальную машину. Убедиться, что статичные сетевые настройки соответствуют заданным в предыдущем пункте

1. Перезагрузим машину

```bash
sudo reboot
```

1. Снова проверим сетевые настройки

![ip add show после перезагрузки системы](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2011.png)

ip add show после перезагрузки системы

1. И DNS

![Используемый DNS](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2012.png)

Используемый DNS

1. Пропингуем 1.1.1.1 и ya.ru

![ping 1.1.1.1](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2013.png)

ping 1.1.1.1

![ping ya.ru](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2014.png)

ping ya.ru

## Part 4. Обновление ОС

### Обновить системные пакеты до последней на момент выполнения задания версии.

1. Обновим информацию о пакетах.

![Вывод обновления пакетов](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2015.png)

Вывод обновления пакетов

1. Установим пакеты

```bash
sudo apt-get upgrade
```

1. Теперь проверим, есть ли пакеты на обновление все еще

![Ура, пакетов нет](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2016.png)

Ура, пакетов нет

## Part 5. Использование команды sudo

### Разрешить пользователю, созданному в Part 2, выполнять команду sudo

1. Для начала убедимся, что у нашего пользователя нет прав

![Прав нет…](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2017.png)

Прав нет…

1. Выдадим права пользователю

```bash
sudo usermod -aG sudo mkrtychanr
```

1. Проверим, появились ли они

![Ура, теперь у пользователя есть права](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2018.png)

Ура, теперь у пользователя есть права

### Поменять hostname от имени вновь вступившего в ряды пользователей с sudo правами

1. Сначала зайдем за этого пользователя в систему

![Welcome to the club buddy](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2019.png)

Welcome to the club buddy

1. Что ж, давайте теперь поменяем имя машины

```bash
sudo hostnamectl set-hostname mkrtychanr-1
```

1. Проверим имя машины

![Имя машины было изменено](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2020.png)

Имя машины было изменено

## Part 6. Установка и настройка службы времени

### Настроить службу автоматической синхронизации времени

1. Нужно установить демона

```bash
sudo apt-get install systemd-timesyncd
```

1. Сделаем его видимым

```bash
systemctl unmask systemd-timesyncd.service
```

1. Включим демона

```bash
sudo timedatectl set-ntp yes
```

1. Пабаааам

![Время синхронизировано](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2021.png)

Время синхронизировано

## Part 7. Установка и использование текстовых редакторов

### Установить текстовые редакторы VIM (+ любые два по желанию)

```bash
sudo apt-get install vim
sudo apt-get install nano
sudo apt-get install mcedit
```

### Используя каждый из трех выбранных редакторов, создайте файл test_X.txt (X – название текстового редактора). Написать в нем свой никнейм и сохранить с применением изменений

1. VIM
    
    ![Написали, но пока еще не сохранили. Чтоб сохранить и выйти ***esc → :wq***](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2022.png)
    
    Написали, но пока еще не сохранили. Чтоб сохранить и выйти ***esc → :wq***
    
2. NANO

![Написали, но пока еще не сохранили. Ctrl + O для сохранения и Ctrl + X для выхода](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2023.png)

Написали, но пока еще не сохранили. Ctrl + O для сохранения и Ctrl + X для выхода

1. MCEDIT

![Нажимаем F2 для сохранения и F10 для выхода](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2024.png)

Нажимаем F2 для сохранения и F10 для выхода

### Используя каждый из трех выбранных редакторов, откройте файл на редактирование, отредактируйте файл, заменив никнейм на строку "21 School 21", закройте файл без сохранения изменений

1. VIM

![Чтоб закрыть без сохранения изменений esc -> :q!](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2025.png)

Чтоб закрыть без сохранения изменений esc -> :q!

1. NANO

![Чтоб закрыть без сохранения изменений Ctrl + X -> N](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2026.png)

Чтоб закрыть без сохранения изменений Ctrl + X -> N

1. MCEDIT

![Чтоб закрыть без сохранения изменений F10 и выбрать пункт No в интерактивном окне](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2027.png)

Чтоб закрыть без сохранения изменений F10 и выбрать пункт No в интерактивном окне

### Используя каждый из трех выбранных редакторов, отредактируйте файл ещё раз (по аналогии с предыдущим пунктом), а затем освойте функции поиска по содержимому файла (слово) и замены слова на любое другое

1. VIM
    
    ![Чтоб найти подстроку в файле – нужно нажать на ***esc*** и написать ***/<word_to_find>***](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2028.png)
    
    Чтоб найти подстроку в файле – нужно нажать на ***esc*** и написать ***/<word_to_find>***
    
    ![Чтоб найти и заменить – нужно написать :%s/<word_to_find>/<word_to_change>](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2029.png)
    
    Чтоб найти и заменить – нужно написать :%s/<word_to_find>/<word_to_change>
    
2. NANO

![Чтоб найти подстроку в файле – Ctrl + W и ввести слово для поиска – как вывод – NANO просто перенесет курсор на первое пересечение](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2030.png)

Чтоб найти подстроку в файле – Ctrl + W и ввести слово для поиска – как вывод – NANO просто перенесет курсор на первое пересечение

![Чтоб найти и заменить – Ctrl + \ там дальше будет окно, где нужно будет ввести меняемое на меняющее слово](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2031.png)

Чтоб найти и заменить – Ctrl + \ там дальше будет окно, где нужно будет ввести меняемое на меняющее слово

1. MCEDIT

![Чтоб найти подстроку в файле – F7 и ввести слово для поиска](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2032.png)

Чтоб найти подстроку в файле – F7 и ввести слово для поиска

![Чтоб найти и заменить – F4 далее вводим что изменить и на что, после его выйдет данное окно](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2033.png)

Чтоб найти и заменить – F4 далее вводим что изменить и на что, после его выйдет данное окно

![После замены](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2034.png)

После замены

## Part 8. Установка и базовая настройка сервиса **SSHD**

### Установить службу SSHd

```bash
sudo apt-get install openssh-server
```

### Добавить автостарт службы при загрузке системы

```bash
sudo systemctl enable sshd
```

### Перенастроить службу на 2022 порт

1. Чтоб изменить порт SSH нужно зайти в ***/etc/ssh/sshd_config*** и раскомментировать строку с портов и поменять порт с 22 на 2022

![/etc/ssh/sshd_config](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2035.png)

/etc/ssh/sshd_config

1. Нужно перезагрузить демон SSHd

```bash
sudo systemctl restart ssh
```

### Используя команду ps, показать наличие процесса sshd. Для этого к команде нужно подобрать ключи

![ax – будут показаны все процессы. u — выводит пользователя и еще доп информацию. grep выводит только те строчки, где есть sshd](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2036.png)

ax – будут показаны все процессы. u — выводит пользователя и еще доп информацию. grep выводит только те строчки, где есть sshd

### Перезагрузить систему

```bash
reboot
```

![-t — вывести все tcp порты. -e — вывести все порты. -n — не будет выводить имена. IP-адрес 0.0.0.0 может использоваться на серверах для обозначения того, что служба может связываться со всеми сетевыми интерфейсами. Он дает команду серверу «прослушивать» и принимать соединения с любого IP-адреса.](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2037.png)

-t — вывести все tcp порты. -e — вывести все порты. -n — не будет выводить имена. IP-адрес 0.0.0.0 может использоваться на серверах для обозначения того, что служба может связываться со всеми сетевыми интерфейсами. Он дает команду серверу «прослушивать» и принимать соединения с любого IP-адреса.

## Part 9. Установка и использование утилит **top**, **htop**

### Установить и запустить утилиты top и htop

- По выводу команды top определить и написать в отчёте:
    - uptime — 9 минут
    - количество пользователей — 1
    - загрузка системы — 0%
    - количество процессов — 27
    - загрузка cpu — 0%
    - загрузка памяти — 8%
    - pid процесса, занимающего больше всего памяти — 11617
    - pid процесса, занимающего больше всего процессорного времени — 1
- В отчёт вставить скрин с выводом команды htop:
    - PID:
    
    ![Отсортировано по PID](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2038.png)
    
    Отсортировано по PID
    
    - PERCENT_CPU:
    
    ![Отсортировано по PERCENT_CPU](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2039.png)
    
    Отсортировано по PERCENT_CPU
    
    - PERCENT_MEM:
    
    ![Отсортировано по PERCENT_MEM](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2040.png)
    
    Отсортировано по PERCENT_MEM
    
    - отфильтрованному для процесса sshd:
    
    ![Отфильтровано по sshd](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2041.png)
    
    Отфильтровано по sshd
    
    - с процессом syslog, найденным, используя поиск:
    
    ![Найденный syslog](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2042.png)
    
    Найденный syslog
    
    - с добавленным выводом hostname, clock и uptime:
    
    ![hostname, clock, uptime](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2043.png)
    
    hostname, clock, uptime
    

## Part 10. Использование утилиты **fdisk**

### Запустить команду fdisk -l

- Название диска: VBOX HARDDISK
- Размер диска: 25 Гигабайт
- Количество секторов: 52428800
- Размер swap: 2 Гигабайта

## Part 11. Использование утилиты **df**

### Запустить команду df

- /
    - Размер раздела: 11758760
    - Размер занятого пространства: 5038988
    - Размер свободного пространства: 6100664
    - Процент использования: 46%
- Единица измерения — Килобайты

### Запустить команду df -Th

- /
    - Размер раздела: 12 Гигабайт
    - Размер занятого пространства: 4.9 Гигабайт
    - Размер свободного пространства: 5.9 Гигабайт
    - Процент использования: 46%
- Тип файловой системы – ext4

## Part 12. Использование утилиты **du**

### Вывести размер папок /home, /var, /var/log (в байтах, в человекочитаемом виде)

- /home

![Вывод в байтах](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2044.png)

Вывод в байтах

![Вывод в человекочитаемом виде](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2045.png)

Вывод в человекочитаемом виде

- /var

![Вывод в байтах](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2046.png)

Вывод в байтах

![Вывод в человекочитаемом виде](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2047.png)

Вывод в человекочитаемом виде

- /var/log

![Вывод в байтах](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2048.png)

Вывод в байтах

![Вывод в человекочитаемом виде](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2049.png)

Вывод в человекочитаемом виде

### Вывести размер всего содержимого в /var/log

![Вывод в человекочитаемом виде](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2050.png)

Вывод в человекочитаемом виде

## Part 13. Установка и использование утилиты **ncdu**

### Установка ncdu

```bash
sudo apt-get install ncdu
```

### Вывести размер папок /home, /var, /var/log

- /home

![Размер /home](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2051.png)

Размер /home

- /var

![Размер /var](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2052.png)

Размер /var

- /var/log

![Размер /var/log](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2053.png)

Размер /var/log

## Part 14. Работа с системными журналами

### Открыть для просмотра:

- /var/log/dmesg

![/var/log/dmesg](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2054.png)

/var/log/dmesg

- /var/log/syslog

![/var/log/syslog](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2055.png)

/var/log/syslog

- /var/log/auth.log

![/var/log/auth.log](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2056.png)

/var/log/auth.log

### Время последней успешной авторизации

- Последний вход по логам — 29 ноября в 23:13 по SSH

![/var/log/auth.log — последний вход](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2057.png)

/var/log/auth.log — последний вход

### Перезапустить службу SSHd

```bash
sudo systemctl restart ssh
```

![/var/log/syslog — перезапуск SSH](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2058.png)

/var/log/syslog — перезапуск SSH

## Part 15. Использование планировщика заданий **CRON**

### Используя планировщик заданий, запустите команду uptime через каждые 2 минуты

```bash
crontab -e
```

![Измененный файл планировщика](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2059.png)

Измененный файл планировщика

![Сообщение о добавлении новой задачи](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2060.png)

Сообщение о добавлении новой задачи

### Найти в системных журналах строчки о выполнении

![Логи об вызове uptime](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2061.png)

Логи об вызове uptime

### Вывести на экран список текущих заданий для CRON

![Список задач для CRON](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2062.png)

Список задач для CRON

### Удалите все задания из планировщика заданий

```bash
crontab -r
```

![Пустой CRON](Linux%2001%209502a37ba27540ed97a88836013aa9d1/Untitled%2063.png)

Пустой CRON